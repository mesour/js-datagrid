var webpack = require('webpack');
var ExtractTextPlugin = require("extract-text-webpack-plugin");
var OptimizeCssAssetsPlugin = require("optimize-css-assets-webpack-plugin");

var config = Object.create(
	require('./webpack.config')
);

config.output.filename = 'js/mesour.datagrid.min.js';
config.output.sourceMapFilename = 'js/mesour.datagrid.js.map';
config.devtool = 'source-map';
config.plugins = [
	new ExtractTextPlugin('css/mesour.datagrid.min.css'),
	new webpack.optimize.OccurenceOrderPlugin(),
	new webpack.optimize.DedupePlugin(),
	new webpack.optimize.AggressiveMergingPlugin(),
	new webpack.optimize.UglifyJsPlugin({
		compress: {
			warnings: false
		}
	}),
	new OptimizeCssAssetsPlugin({
		assetNameRegExp: /\.min\.css$/,
		cssProcessorOptions: { discardComments: { removeAll: true } }
	})
];

module.exports = config;